<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lvm on SWebber IT Services</title>
    <link>http://swebber.me/tags/lvm/index.xml</link>
    <description>Recent content in Lvm on SWebber IT Services</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>sebastian@swebber.me (Sebastian Webber)</managingEditor>
    <webMaster>sebastian@swebber.me (Sebastian Webber)</webMaster>
    <copyright>This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</copyright>
    <atom:link href="http://swebber.me/tags/lvm/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Expandindo o volume de uma partição no Grupo do LVM</title>
      <link>http://swebber.me/blog/2012/02/15/expandindo-o-volume-de-uma-partio-no-grupo-do-lvm/</link>
      <pubDate>Wed, 15 Feb 2012 18:53:16 -0300</pubDate>
      <author>sebastian@swebber.me (Sebastian Webber)</author>
      <guid>http://swebber.me/blog/2012/02/15/expandindo-o-volume-de-uma-partio-no-grupo-do-lvm/</guid>
      <description>

&lt;blockquote&gt;
&lt;p&gt;No exemplo desse post, o servidor foi instalado com um disco de 15gb, porém o disco foi expandido para 60gb.  O disco utilizado é o ‘/dev/xvda’.  É possível que adicionando o disco a operação seja semelhante.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;crie-a-partição-disponível&#34;&gt;Crie a partição disponível&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cfdisk /dev/xvda
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Crie a nova partição:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Select o tipo de partição:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image1.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Informe o tamanho da partição:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image2.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Altere o tipo:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image3.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Selecione o tipo “8E – Linux LVM”:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image4.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Grave as partições no disco:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://swebber.me/wp-content/uploads/2012/02/image5.png&#34; alt=&#34;photo&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Confirme a gravação das mudanças no disco e saia. Após isso, reinicie a máquina.&lt;/p&gt;

&lt;h3 id=&#34;crie-o-novo-volume&#34;&gt;Crie o novo volume&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;[root@server ~]# pvcreate /dev/xvda3
Writing physical volume data to disk &amp;quot;/dev/xvda3&amp;quot;
Physical volume &amp;quot;/dev/xvda3&amp;quot; successfully created
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;adicione-o-novo-volume-no-grupo-existente&#34;&gt;Adicione o novo volume no grupo existente&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;rsquo;/dev/vg_server&amp;rsquo; é o nome do volume&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;[root@server ~]# vgextend /dev/vg_server /dev/xvda3
Volume group &amp;quot;vg_server&amp;quot; successfully extended
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;redimensione-o-grupo-existente&#34;&gt;Redimensione o grupo existente&lt;/h2&gt;

&lt;h3 id=&#34;liste-o-grupo-atual&#34;&gt;Liste o grupo atual&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;[root@server ~]# vgdisplay --units m
--- Volume group ---
VG Name               vg_server
System ID
Format                lvm2
Metadata Areas        2
Metadata Sequence No  4
VG Access             read/write
VG Status             resizable
MAX LV                0
Cur LV                2
Open LV               2
Max PV                0
Cur PV                2
Act PV                2
VG Size               60932.00 MiB
PE Size               4.00 MiB
Total PE              15233
Alloc PE / Size       3714 / 14856.00 MiB
Free  PE / Size       11519 / 46076.00 MiB
VG UUID               PHTPKa-f1vQ-Ge3q-wc2l-uAn6-gcmP-WlE495
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;O campo &lt;strong&gt;&amp;lsquo;Free PE / Size&amp;rsquo;&lt;/strong&gt; mostra o espaço disponível (&lt;strong&gt;46076.00 MiB&lt;/strong&gt; no exemplo).&lt;/p&gt;

&lt;h3 id=&#34;aumente-o-volume&#34;&gt;Aumente o volume&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;rsquo;/dev/vg_server/lv_root&amp;rsquo; é a partição utilizada&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;[root@server ~]# lvextend -l +100%FREE /dev/vg_server/lv_root
Extending logical volume lv_root to 51.50 GiB
Logical volume lv_root successfully resized
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;aumente-a-partição-no-sistema-de-arquivos&#34;&gt;Aumente a partição no sistema de arquivos&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;rsquo;/dev/vg_server/lv_root&amp;rsquo; é a partição utilizada&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;[root@server ~]# resize2fs /dev/vg_server/lv_root
resize2fs 1.41.12 (17-May-2010)
Filesystem at /dev/vg_server/lv_root is mounted on /; on-line resizing required
old desc_blocks = 1, new_desc_blocks = 4
Performing an on-line resize of /dev/vg_server/lv_root to 13501440 (4k) blocks.
The filesystem on /dev/vg_server/lv_root is now 13501440 blocks long.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Fontes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.howtoforge.com/logical-volume-manager-how-can-i-extend-a-volume-group&#34;&gt;http://www.howtoforge.com/logical-volume-manager-how-can-i-extend-a-volume-group&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>